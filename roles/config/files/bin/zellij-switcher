#!/usr/bin/env bash
PARAM_DIR=$1
HEADER="Project directories"
PROMPT="> "

if [[ -z $PARAM_DIR ]]; then
    dir=$(fdfind . ~/personal --min-depth 1 --max-depth 1 --type d | fzf --reverse --header "$HEADER" --prompt "$PROMPT")
else
    dir=$1
fi

if [[ -z $dir ]]; then
    exit 0
fi

session_name=$(basename "$dir" | tr . _)

if [[ -z $ZELLIJ ]]; then
    zellij a -c $session_name options --default-cwd $dir
else
    xdotool key --delay 5 alt+d
    xdotool type --delay 5 --clearmodifiers "zs $dir"
    xdotool key KP_Enter
fi

